#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SPTUvzQBSF9/kVhzC8baHzjh+7QuuiBqmLRmwKLoQynV6SaMyNMzelfv13qaIVlKJ3ex7uOY9ZlrVZ2lDAcCPGPraejONabFmTD6bxvC5DyfX/UGA0gllbbyrOP8iqDUJe77CKcxyN/h1GydUkW4zT02SoTqLwEITunFTQumbd2Jw8dIUgVtqA23ZJFclvCrQLpLmVppVdVzrPLubZUHWdlT9/eEZBdgVd4/igF53P0ulill1OpmdD1cXN/Ta4jvDttLY+BznE6lM13kNyg1i9D92HkUf8c955SjaljHlFAyhyfaRvDgMobvpIvGe/DfxLB72IXMFQX2Qi2pSC3dTXAAAA//9qyXjA+QEAAA==

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xYfXPauPb+35/i1GXy0q0xkG7a/jp0h4LT8AsFrg3de2+34xHWMWgwkivJJGya735HNi8mYbfJTv1HYuvl6DnPOeeRxPNn7oRxd0LUzPJ8P7zo9rzw99aofRmOup+8wXjUPAdLoQbnxmIxfAEnBlek2iV/ZhLdSHBNGEep3FSKJVNM8GokFmmCGuHrO9Az5BbkD0YzAXYrkUjoCiThoAWoLIpQKcAbphmfVqtVezP8hmmoWTGzrPGHcX80Dn2v57UCr1k5SdQklJggUQiOBEed5uC+QOV2f+wdNJtg18+rtVc2fC3jURkVQFLtTI1zKyCZFhIXYokQzaTgK2uLufLbboZaKY2LSCcgUWki9bqFOpotUK14RHPIxcQTSjSevqyczITSnCzw9CXks6JMabFQkWSpfv8+J3RhWbGQwIBxqJwo/AZ1ODuv1U7fARU5gIJ/9SP+QyUyGWFVze4FAGAqMQXn4hscP7/0ekPPD7zBxfETDB4dwUQimecWY7aDVWHg4Lcc8INV80hWDqdXwXKicDtaJYgp1DcrUMHRUkjBYWC7JdgutR8P3CrenjDBuiZMh7GQYcwSLByr/3A+40qTJFGGq+/f/97zR0IqmfyHoCLBYzb9mZh2Fi2LMkUmCdbf1F4FRSn4qESyRGrlwvHLjeWN2p1w6Hl+2Pb8UbNyUlTH7X5796Lbbo284A6+Q5RpcOjxl2OjN41dw9e8ob5reJk3VE5OKrf9QccLu/2O9++7X+qnp6elZa+8/xxadeh3P7dGnun+eauuxXIjSIPASFClPfC9QRAOgrDf+uTtS1EhjO0Z4VPGp0AxJlmiYZ5N0AjNhHFIREQ0E7wQx6vxB6896jXzMK2H5aqzVeglka7MuCtxIoR2JH7LmES6V5q+92EwGPnev8Zd3+s0tczQ2lbivc6YmA6zRBH6TGKLLhgfK5QbV+3K7cfhODSE3NnwrAm2MXlPdqMECR+nH4fjjmRLlCo3+vmyE/YGH4M8JYet0WWzlIHLGXXWRbDdWraeVh5MhYfUUtQYaaQwFQlFDmxBpgipxI1du4ytvcn4rhmm8q6Lca8XdvvBqNXrhfdY2XK2paEbhJ8vO3c2NMFQsM/ADtZYmXB/vuwAZUpLAZNMQ17YB7ziQkMsMk7tA7pqhufV3B+MwovBuN8pC/Rh8Hm8N0mzS9T1/rlLVKP5xquDVoyLmzCXfFzT2sFU7egpnP5YCsE7UHOWpkXSp8gp8oih2kxfZ/wjMJYjzpVJzowy3SmmFsa2UfUzbrbqbbtkpnqeQzeGKH+HKeotBqS5acgUAtNAlPk0AyFKWD4ICQURQ6Sl1e51w9Fg0GvahSV7s8gIE0yF1HSYZFPGLWsLq4/6Wsj5pn3depVNMEF9VZS2+UfoosWpeRtKcbMqM/LsR/KSM+IP20X9SiQajaFPhLMYle4wWSrrqzeq9NXud0sVb8ox0CSad7lGGZMIlWVZhf0tvxQ2TZ8EZ1rIAOWSRbhpDVbKEF58rB1df/2/yCQnm75xak5PfUGxRyaYqNznw2lYTr1HZ4p59iuyQWk9wvprp/b6LTqvameRMzn7teGQ+ttGHbFRe40I78FVK+VOMuUuF+YvLYTMnS3DTLPEzfiEcbo7z6zPLvUz9sdPX+UPboOLOnJlVDV7RLKp+5hZcpFvBaaXGDFNddWEskrdt29TlExQFj2lskiqwynqMM3kFKFRg7Ma1Bs1ICmJZthwDCwFR4Wgt3rdTmvUHfRDz/ebNctqDbth4PmfPT/s9IPQ90Z+1wuajdoGQWlAvnazCS+qqWRLojFhfF59UYbzl+byG4PvBc3KiUQtV9GChiwOY8KSTCJUbg/PvDOnbeAqEWKepfvDDJy7UysYBc3Kbxu4wSivvNo+R+tO38vpfGHXz99Uz8+q9cbbav3cfgEPM/AeU7mcX70JwtL6rf+OfS8H2xsMrsbD8KLV7T08OD/C0iEbMdtJdGloe9Dvb2n9tVb27mmRKp6/slyv1cpb1Q9DVp68jlkEzvLPAxGDV6/OzIH3EbzkVnNG1ptNZf/8c/9EcVycq2BzrnoJRYPZybigaO5wdVgwnmk8zqdtr9ngRGCrWaapuObm8lqHI/sfKBdJ9YLI+e+tHuPZTWuKXEPGZyKhcPQgrk8z7WZKugmbbGVjfcWtUsKS1dr8YzFsL8N2O7/zQnHphZhxpmZIqyY1QKFcooRIcI6R2fYhmmE0h0hQ/D8bKvsx/JvbNXJ68G69mFMmwUkPX23MGUeLLJo9+rcNK1VAspv4+tpI9W7SdqSTqmoipnBkWcU57Z4L1nNvcGH9LwAA//+l12eKgBEAAA==

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4ySz0/bThDF7/4rRhGH7/ewbOmPS5EPUAyNiCjCQRxChNbrgYyynnV3Z0No6f9emRAgYKT6ZM++z5vn1ZucM8k0O8BoA7VCnvPjVKFDyb55rqmbnBqZFUuKEnOdYtDOW+N0Raznj9Ism5QYFmRxmp1hFBMkN+7W3MWs4AUFzw2yHJLDXKNYXeO1SU6e+DJZizEWS5JSjKSY73z+lBVLtGXndRowf9hXmTgD7VvR5lcKqK1nMcQY4tpqO856uGZeUwDVgl6YoB1VT5v/RWuZ3suiLAzoGiaw9V/jEwvcw03AFi4HrzddDuAebi0o9z8oh/ABprALMkOG1doHXKmKuH4T8+1gF65p0Jf+0aYxc1RxZgK+dcs2OaVjR2IlpnIYQQmw6TwcRemVUvtayqnBQHYNPVPvNAYuM3h8lELu3FTEsMCwccK+RuVMhS7mg63fx+f7xagYX538OCiuRnv7xaj8M9gAFvlHUOqpFiokFmowD9h4QVDrgQr4M2EU1X34JPnOl6YPVMh164klT0zLr1rrkPi5dvWL1+3o7XwzjHepQdW6dEOsagqr8ndXEBgFo14pVoL4gt1a/+nhaO+o7Ds4K46G5bg4e7iLnvHFcPz9arw3PBmXWTYZchTj3DS7MCxY79/lTXJCKkUM22LCDcrfAAAA//8PqjOJCQQAAA==



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        snapshotter = "teleportd"
        disable_snapshot_annotations = false
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".cni]
        bin_dir = "/opt/cni/bin"
        conf_dir = "/etc/cni/net.d"
        conf_template = "/etc/containerd/kubenet_template.conf"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    [proxy_plugins]
      [proxy_plugins.teleportd]
        type = "snapshot"
        address = "/run/teleportd/snapshotter.sock"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": false,
            "promiscMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          },
          {
            "type": "portmap",
            "capabilities": {"portMappings": true},
            "externalSetMarkChain": "KUBE-MARK-MASQ"
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF


- path: /etc/systemd/system/teleportd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=teleportd teleport runtime
    After=network.target
    [Service]
    ExecStart=/usr/local/bin/teleportd --metrics --aksConfig /etc/kubernetes/azure.json
    Delegate=yes
    KillMode=process
    Restart=always
    LimitNPROC=infinity
    LimitCORE=infinity
    LimitNOFILE=1048576
    TasksMax=infinity
    [Install]
    WantedBy=multi-user.target
    #EOF





- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
