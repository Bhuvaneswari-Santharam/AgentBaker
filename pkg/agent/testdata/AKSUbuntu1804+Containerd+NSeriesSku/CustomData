#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SPTUvzQBSF9/kVhzC8baHzjh+7QuuiBqmLRmwKLoQynV6SaMyNMzelfv13qaIVlKJ3ex7uOY9ZlrVZ2lDAcCPGPraejONabFmTD6bxvC5DyfX/UGA0gllbbyrOP8iqDUJe77CKcxyN/h1GydUkW4zT02SoTqLwEITunFTQumbd2Jw8dIUgVtqA23ZJFclvCrQLpLmVppVdVzrPLubZUHWdlT9/eEZBdgVd4/igF53P0ulill1OpmdD1cXN/Ta4jvDttLY+BznE6lM13kNyg1i9D92HkUf8c955SjaljHlFAyhyfaRvDgMobvpIvGe/DfxLB72IXMFQX2Qi2pSC3dTXAAAA//9qyXjA+QEAAA==

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4ySz0/bThDF7/4rRhGH7/ewbOmPS5EPUAyNiCjCQRxChNbrgYyynnV3Z0No6f9emRAgYKT6ZM++z5vn1ZucM8k0O8BoA7VCnvPjVKFDyb55rqmbnBqZFUuKEnOdYtDOW+N0Raznj9Ism5QYFmRxmp1hFBMkN+7W3MWs4AUFzw2yHJLDXKNYXeO1SU6e+DJZizEWS5JSjKSY73z+lBVLtGXndRowf9hXmTgD7VvR5lcKqK1nMcQY4tpqO856uGZeUwDVgl6YoB1VT5v/RWuZ3suiLAzoGiaw9V/jEwvcw03AFi4HrzddDuAebi0o9z8oh/ABprALMkOG1doHXKmKuH4T8+1gF65p0Jf+0aYxc1RxZgK+dcs2OaVjR2IlpnIYQQmw6TwcRemVUvtayqnBQHYNPVPvNAYuM3h8lELu3FTEsMCwccK+RuVMhS7mg63fx+f7xagYX538OCiuRnv7xaj8M9gAFvlHUOqpFiokFmowD9h4QVDrgQr4M2EU1X34JPnOl6YPVMh164klT0zLr1rrkPi5dvWL1+3o7XwzjHepQdW6dEOsagqr8ndXEBgFo14pVoL4gt1a/+nhaO+o7Ds4K46G5bg4e7iLnvHFcPz9arw3PBmXWTYZchTj3DS7MCxY79/lTXJCKkUM22LCDcrfAAAA//8PqjOJCQQAAA==



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = "oss/kubernetes/pause:1.3.1"
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/nvidia-container-runtime"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promiscMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          },
          {
            "type": "portmap",
            "capabilities": {"portMappings": true},
            "externalSetMarkChain": "KUBE-MARK-MASQ"
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
